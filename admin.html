<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Bus - Admin Panel</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <style>
        body { font-family: sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        .admin-box { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; }
        input { width: 90%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; }
        button { width: 100%; padding: 12px; background-color: #1a73e8; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        #result { margin-top: 20px; padding: 15px; border-radius: 8px; background: #e8f0fe; color: #1967d2; display: none; }
        #qrcode-container { margin-top: 20px; display: flex; justify-content: center; }
    </style>
</head>
<body>

<div class="admin-box">
    <h2>ðŸšŒ Create Smart Card</h2>
    <input type="text" id="passengerName" placeholder="Enter Passenger Name">
    <button onclick="createCard()">Generate Card & QR</button>
    <div id="result"></div>
    <div id="qrcode-container"></div>
</div>

<script>
    // These values are copied directly from your image_e654a0.jpg
    const firebaseConfig = {
        apiKey: "AIzaSyDkt8VhTVIE4tj6R-nWQE_1j7EQdyPIpm8",
        authDomain: "smartbuscard.firebaseapp.com",
        databaseURL: "https://smartbuscard-default-rtdb.firebaseio.com",
        projectId: "smartbuscard",
        storageBucket: "smartbuscard.firebasestorage.app",
        messagingSenderId: "740841885323",
        appId: "1:740841885323:web:87c2ec39e01ffb533f8e8e"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function createCard() {
        const name = document.getElementById('passengerName').value;
        if (!name) { alert("Enter a name!"); return; }

        const cardId = "BUS" + Math.floor(100000 + Math.random() * 900000);

        db.ref('cards/' + cardId).set({
            name: name,
            balance: 100
        }).then(() => {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = "block";
            resultDiv.innerHTML = `âœ… Card Saved!<br>ID: <b>${cardId}</b><br>Name: ${name}`;

            // Generate QR
            document.getElementById("qrcode-container").innerHTML = "";
            new QRCode(document.getElementById("qrcode-container"), {
                text: cardId,
                width: 150,
                height: 150
            });
        }).catch(err => alert("Error: " + err.message));
    }
</script>
</body>
</html>
