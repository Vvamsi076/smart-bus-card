<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<div id="qrcode-container" style="margin-top:20px; display:flex; justify-content:center;"></div>

<script>
  // ... (Keep your existing Firebase Config here) ...

  function createCard() {
    const name = document.getElementById('name').value;
    const cardId = "BUS" + Math.floor(100000 + Math.random() * 900000);
    const initialBalance = 100;

    db.ref('cards/' + cardId).set({
      name: name,
      balance: initialBalance
    }).then(() => {
      // Clear previous QR code
      document.getElementById("qrcode-container").innerHTML = "";
      
      // 1. Show Text Success
      document.getElementById('result').innerHTML = `
        <div style="color:green; font-weight:bold;">✅ Card Saved to Database!</div>
        Name: ${name}<br>
        Card No: <strong>${cardId}</strong><br>
        Current Balance: ₹${initialBalance}
      `;

      // 2. Generate QR Code containing ONLY the Card ID
      new QRCode(document.getElementById("qrcode-container"), {
        text: cardId,
        width: 128,
        height: 128,
        colorDark : "#000000",
        colorLight : "#ffffff"
      });
    });
  }
</script>
